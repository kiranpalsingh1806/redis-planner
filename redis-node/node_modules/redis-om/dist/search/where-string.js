"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const where_field_1 = tslib_1.__importDefault(require("./where-field"));
const errors_1 = tslib_1.__importDefault(require("../errors"));
class WhereString extends where_field_1.default {
    value;
    eq(value) {
        this.value = value.toString();
        return this.search;
    }
    equal(value) { return this.eq(value); }
    equals(value) { return this.eq(value); }
    equalTo(value) { return this.eq(value); }
    match(_) { return this.throwMatchExcpetion(); }
    matches(_) { return this.throwMatchExcpetion(); }
    matchExact(_) { return this.throwMatchExcpetion(); }
    matchExactly(_) { return this.throwMatchExcpetion(); }
    matchesExactly(_) { return this.throwMatchExcpetion(); }
    get exact() { return this.throwMatchExcpetionReturningThis(); }
    get exactly() { return this.throwMatchExcpetionReturningThis(); }
    toString() {
        const matchPunctuation = /[,.<>{}[\]"':;!@#$%^&*()\-+=~|/\\ ]/g;
        const escapedValue = this.value.replace(matchPunctuation, '\\$&');
        return this.buildQuery(`{${escapedValue}}`);
    }
    throwMatchExcpetion() {
        throw new errors_1.default("Cannot perform full-text search operations like .match on field of type 'string'. If full-text search is needed on this field, change the type to 'text' in the Schema.");
    }
    throwMatchExcpetionReturningThis() {
        throw new errors_1.default("Cannot perform full-text search operations like .match on field of type 'string'. If full-text search is needed on this field, change the type to 'text' in the Schema.");
    }
}
exports.default = WhereString;
